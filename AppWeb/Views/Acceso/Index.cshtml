
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutLogin.cshtml";
}

<div class="login-container">
    <form id="frm">
        <div class="form-group">
            <label for="user">Usuario:</label>
            <input type="text" name="user" class="form-control" />
        </div>

        <div class="form-group">
            <label for="password">Contraseña:</label>
            <input type="password" name="password" class="form-control" />
        </div>
        <button type="submit" class="btn btn-success">Entrar</button>
        <a href="@Url.Content("~/Acceso/RecuperarClave")">¿Olvidaste tu contraseña?</a>
        <br>
        <br>
        
        @if (TempData["SuccessMessage"] != null)
        {
            <div class="alert alert-success">@TempData["SuccessMessage"]</div>
            <script>
                setTimeout(function () {
                    $(".alert").fadeOut("slow", function () {
                        $(this).remove();
                    });
                }, 2000);
            </script>
        }
    </form>
</div>

<style>

    .login-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(#1AF7E6, #000);
        background-size: cover;
        background-position: center;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    form {
        background-color: rgba(255, 255, 255, 0.8);
        padding: 2rem;
        border-radius: 0.5rem;
        max-width: 30rem;
        width: 100%;
    }
</style>

@section scripts{
    <script>
    $(document).ready(function () {
        $("#frm").submit(function (e) {
            e.preventDefault();
            url = "@Url.Content("~/Acceso/Enter")"
            parametros = $(this).serialize();
            $.post(url, parametros, function (data) {
                if (data == "1") {
                    document.location.href = "@Url.Content("~/")";

                } else {
                    alert(data)
                }
            })
        })
    })
    </script>
    
}

